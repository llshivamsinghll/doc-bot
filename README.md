# Doc-Bot: Document Q&A System

A powerful document question-answering system built with FastAPI, LangChain, and Groq LLM. This system uses RAG (Retrieval-Augmented Generation) to provide accurate answers based on your document content.

## Features

- üìö Document-based Q&A using RAG architecture
- üîç Semantic search using Pinecone vector store
- ü§ñ Powered by Groq's Llama3-70b model
- üöÄ FastAPI backend for high performance
- üìù Comprehensive logging and error handling
- üîí Secure API key management

## Project Structure

```
doc-bot/
‚îú‚îÄ‚îÄ app.py                 # FastAPI application entry point
‚îú‚îÄ‚îÄ store_index.py         # Script for storing document embeddings
‚îú‚îÄ‚îÄ requirements.txt       # Python dependencies
‚îú‚îÄ‚îÄ .env.example           # Example environment variables
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ helper.py         # Helper functions for embeddings and processing
‚îÇ   ‚îú‚îÄ‚îÄ prompt.py         # System prompts and templates
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ data/                 # Directory for storing documents
‚îî‚îÄ‚îÄ research/            # Research and development files
```

## Prerequisites

- Python 3.8+
- Pinecone account and API key
- Groq API key
- Hugging Face account (for embeddings)

## Installation

1. Clone the repository:
```bash
git clone https://github.com/yourusername/doc-bot.git
cd doc-bot
```

2. Create and activate a virtual environment:
```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

3. Install dependencies:
```bash
pip install -r requirements.txt
```

4. Copy `.env.example` to `.env` and fill in your API keys:
```bash
cp .env.example .env
```

## Usage

1. Start the FastAPI server:
```bash
python app.py
```

2. The server will start at `http://127.0.0.1:8080`

---

# üìö API Documentation

## Base URL
```
https://your-app-url.onrender.com
```

---

## 1. POST `/get`

### Description
Ask a question about your indexed documents and receive an AI-generated answer using Retrieval-Augmented Generation (RAG).

### Request
- **Method:** POST
- **Content-Type:** `application/x-www-form-urlencoded`
- **Body Parameters:**
  - `msg` (string, required): The question you want to ask.

#### Example Request (curl)
```bash
curl -X POST "https://your-app-url.onrender.com/get" \
     -H "Content-Type: application/x-www-form-urlencoded" \
     -d "msg=What is this document about?"
```

### Response
- **Content-Type:** `application/json`
- **Body:**  
  - A plain string containing the answer generated by the AI.

#### Example Success Response
```json
"The document discusses the basics of machine learning and its applications in data science."
```

### Error Responses
- **400 Bad Request**
  ```json
  {
    "detail": "Missing required field: msg"
  }
  ```
- **500 Internal Server Error**
  ```json
  {
    "detail": "Error message description"
  }
  ```
- **503 Service Unavailable**
  ```json
  {
    "detail": "Service components not initialized"
  }
  ```

---

## 2. GET `/health`

### Description
Check the health and readiness of the Doc-Bot service.

### Request
- **Method:** GET

#### Example Request (curl)
```bash
curl "https://your-app-url.onrender.com/health"
```

### Response
- **Content-Type:** `application/json`
- **Body:**  
  - A JSON object with the health status, component initialization, package versions, and environment info.

#### Example Success Response
```json
{
  "status": "healthy",
  "components": {
    "embeddings": "initialized",
    "vector_store": "initialized",
    "llm": "initialized"
  },
  "versions": {
    "langchain": "0.0.348",
    "langchain_pinecone": "0.1.3",
    "pinecone": "2.2.1",
    "fastapi": "0.109.2"
  },
  "environment": {
    "python": "3.11.11",
    "pinecone_environment": "gcp-starter",
    "index_name": "doc-bot"
  }
}
```

### Error Responses
- **503 Service Unavailable**
  ```json
  {
    "detail": "Service components not initialized"
  }
  ```

---

## General Notes
- All endpoints are CORS-enabled.
- All secrets (API keys) must be set as environment variables.
- The `/get` endpoint expects questions relevant to your indexed documents.
- The `/health` endpoint is useful for monitoring and debugging deployments.

## Summary Table

| Route      | Method | Description                        | Input                | Output         |
|------------|--------|------------------------------------|----------------------|---------------|
| `/get`     | POST   | Ask a question about documents     | `msg` (form string)  | Answer string  |
| `/health`  | GET    | Service health and version info    | None                 | JSON object    |

---

## OpenAPI/Swagger Documentation
FastAPI automatically provides interactive API docs at:
- `/docs` (Swagger UI)
- `/redoc` (ReDoc UI)

Just visit:
```
https://your-app-url.onrender.com/docs
```
or
```
https://your-app-url.onrender.com/redoc
```

---

## Deployment

This project is deployment-ready for platforms like Heroku, Render, Railway, and more. For detailed deployment instructions, see [DEPLOYMENT.md](DEPLOYMENT.md).

### Important Version Information

This project uses specific versions of packages for compatibility:
- langchain-pinecone==0.1.3
- pinecone-client==2.2.1

These versions were chosen to ensure compatibility between components. If you encounter any issues during deployment, make sure these specific versions are installed.

### Quick Deploy

[![Deploy to Heroku](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy)
[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy)

### Deployment Prerequisites

- GitHub repository with your code
- Pinecone account and API key
- Groq API key
- Environment variables set on your deployment platform

### Required Environment Variables

```
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=your_pinecone_environment
GROQ_API_KEY=your_groq_api_key
```

For more information on deployment, troubleshooting, and scaling, see the [detailed deployment guide](DEPLOYMENT.md).

## Document Processing

To add new documents to the system:

1. Place your documents in the `data/` directory
2. Run the indexing script:
```bash
python store_index.py
```

## Development

### Adding New Features

1. Create new modules in the `src/` directory
2. Update `requirements.txt` for new dependencies
3. Add appropriate tests in the `research/` directory

### Environment Variables

Required environment variables:
- `PINECONE_API_KEY`: Your Pinecone API key
- `PINECONE_ENVIRONMENT`: Your Pinecone environment
- `GROQ_API_KEY`: Your Groq API key

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments

- [LangChain](https://python.langchain.com/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Pinecone](https://www.pinecone.io/)
- [Groq](https://groq.com/) 